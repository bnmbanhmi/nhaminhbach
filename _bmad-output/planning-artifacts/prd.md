---
stepsCompleted: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
inputDocuments:
  - docs/api-contracts.md
  - docs/architecture-backend.md
  - docs/architecture-web.md
  - docs/component-inventory-web.md
  - docs/data-models.md
  - docs/deployment-guide.md
  - docs/development-guide.md
  - docs/index.md
  - docs/integration-architecture.md
  - docs/project-overview.md
  - docs/source-tree-analysis.md
  - Sprint 1.md
  - docs/_legacy_archive/nhaminhbach_knowledge/agent/coach_martin.instructions.md
  - docs/_legacy_archive/nhaminhbach_knowledge/agent/coding_agent.instructions.md
  - docs/_legacy_archive/nhaminhbach_knowledge/agent/cto_alex.instructions.md
  - docs/_legacy_archive/nhaminhbach_knowledge/agent/hive_mind.instructions.md
  - docs/_legacy_archive/nhaminhbach_knowledge/agent/librarian.instructions.md
  - docs/_legacy_archive/nhaminhbach_knowledge/archive/CTO_Alex_legacy.md
  - docs/_legacy_archive/nhaminhbach_knowledge/archive/Coach_Martin_legacy.md
  - docs/_legacy_archive/nhaminhbach_knowledge/archive/great_migration.md
  - docs/_legacy_archive/nhaminhbach_knowledge/blueprint.md
  - docs/_legacy_archive/nhaminhbach_knowledge/blueprint_legacy.md
  - docs/_legacy_archive/nhaminhbach_knowledge/blueprint_updated.md
  - docs/_legacy_archive/nhaminhbach_knowledge/core/founder_os.md
  - docs/_legacy_archive/nhaminhbach_knowledge/core/founders_manifesto.md
  - docs/_legacy_archive/nhaminhbach_knowledge/core/lean_business_model.md
  - docs/_legacy_archive/nhaminhbach_knowledge/core/new_core.md
  - docs/_legacy_archive/nhaminhbach_knowledge/core/product_roadmap.md
  - docs/_legacy_archive/nhaminhbach_knowledge/core/system_design_current_vs_target.md
  - docs/_legacy_archive/nhaminhbach_knowledge/index.md
  - docs/_legacy_archive/nhaminhbach_knowledge/principle/engineering_principles.md
  - docs/_legacy_archive/nhaminhbach_knowledge/principle/operating_principles.md
  - docs/_legacy_archive/nhaminhbach_knowledge/principle/product_principles.md
  - docs/_legacy_archive/nhaminhbach_knowledge/process/agent_interaction_protocol.md
  - docs/_legacy_archive/nhaminhbach_knowledge/process/ai_agent_briefing_guide.md
  - docs/_legacy_archive/nhaminhbach_knowledge/process/ai_human_dev_process_diagram.md
  - docs/_legacy_archive/nhaminhbach_knowledge/process/ai_template_migration_guide.md
  - docs/_legacy_archive/nhaminhbach_knowledge/process/code_review_cycle.md
  - docs/_legacy_archive/nhaminhbach_knowledge/process/development_cycle.md
  - docs/_legacy_archive/nhaminhbach_knowledge/process/end_to_end_pipeline_demo.md
  - docs/_legacy_archive/nhaminhbach_knowledge/process/geoid_migration_and_deployment.md
  - docs/_legacy_archive/nhaminhbach_knowledge/process/infrastructure_config_management.md
  - docs/_legacy_archive/nhaminhbach_knowledge/process/infrastructure_permissions_management.md
  - docs/_legacy_archive/nhaminhbach_knowledge/process/knowledge_capture.md
  - docs/_legacy_archive/nhaminhbach_knowledge/process/llm_transformation_process.md
  - docs/_legacy_archive/nhaminhbach_knowledge/process/quality_control_workflow.md
  - docs/_legacy_archive/nhaminhbach_knowledge/process/sprint_planning.md
  - docs/_legacy_archive/nhaminhbach_knowledge/process/task_life_cycle.md
  - docs/_legacy_archive/nhaminhbach_knowledge/process/ui_component_development_cycle.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/decision_log.csv
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/epic/E1.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/epic/E2.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/epic/E3.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/epic/E4.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/sprint/250805_foundation.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/sprint/250806_first_bridge.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/sprint/250807_public_view.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/sprint/250808_intelligent_cockpit.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/sprint/250809_polishing_sprint.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/sprint/250810_data_factory.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/sprint/250816_local_to_cloud_bridge.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/sprint/250819_transformation_engine.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/sprint/250820_qc_cockpit_public_launch.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/sprint/251202_geoid_instant_access_sprint.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/sprint_retrospective_s8.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/build_core_llm_transformation_logic.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/build_the_qc_dashboard_ui.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/create_local_demo_setup.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/database_redesign_geoid_system.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/define_pydantic_data_contracts.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/deploy_ingestion_api.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/deploy_transformer_as_cloud_service.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/deploy_web_to_custom_domain.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/develop_approve_edit_reject_functionality.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/end_to_end_pipeline_testing.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/enhance_dual_range_slider_ux.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/ensure_full_responsive_design.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/execute_cloud_functions_deployment.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/implement_basic_filtering_system.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/implement_geocoding_google_maps.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/implement_osm_nominatim_geocoding_fallback.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/implement_the_side_by_side_review_ui.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/implement_transformation_trigger.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/migrate_llm_to_gemini_vertex_ai.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/migrate_to_supabase.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/upgrade_local_scraper_to_submit_data_to_cloud.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/ward_migration_completed.md
  - docs/_legacy_archive/nhaminhbach_knowledge/strategy/task/wire_scraper_to_cloud_ingestion_api.md
  - docs/_legacy_archive/nhaminhbach_knowledge/system/core_architecture.md
  - docs/_legacy_archive/nhaminhbach_knowledge/system/data_contracts.md
  - docs/_legacy_archive/nhaminhbach_knowledge/system/data_pipeline_architecture.md
  - docs/_legacy_archive/nhaminhbach_knowledge/system/database_schema_and_model.md
  - docs/_legacy_archive/nhaminhbach_knowledge/system/infrastructure_constants.md
  - docs/_legacy_archive/nhaminhbach_knowledge/system/serverless_blueprint.md
  - docs/_legacy_archive/nhaminhbach_knowledge/system/supabase_configuration.md
  - docs/_legacy_archive/nhaminhbach_knowledge/system/tech_stack.md
  - docs/_legacy_archive/nhaminhbach_knowledge/template/epic.md
  - docs/_legacy_archive/nhaminhbach_knowledge/template/sprint.md
  - docs/_legacy_archive/nhaminhbach_knowledge/template/task.md
documentCounts:
  briefCount: 0
  researchCount: 0
  brainstormingCount: 0
  projectDocsCount: 98
workflowType: 'prd'
lastStep: 11
---

# Product Requirements Document - nhaminhbach

**Author:** Minh
**Date:** 2025-12-29

## Executive Summary

**NhaMinhBach** is the "Google of Rental Housing" in Vietnam—a high-trust, hyper-local filter layer that transforms the chaos of social media into a structured, searchable digital identity infrastructure. The platform utilizes a **Hybrid Multi-Cloud Strategy**: **Google Cloud Platform (GCP)** serves as the high-powered "Refinery" for automated data acquisition and AI transformation, while **Supabase and Vercel** provide the high-velocity "Clean Room" for data storage, human validation, and the public user experience.

### The Hybrid Data Refinery (GCP Tier)

- **Autonomous Scraping:** A stateless, Playwright-based pipeline executes high-frequency, shallow-scrapes of Facebook Groups to capture real-time leads without account dependency.
- **AI-Driven Geo-Identity:** Gemini 2.5 Flash Lite extracts structured address and amenity data, enforcing a unique **Geo-Identity System** (`29CG.HHHRR`) through address-fingerprinting *before* data is committed to production.
- **Geocoding Fallback:** Automated location mapping using a Google Maps → Nominatim fallback sequence to ensure coordinate accuracy.

### The App & Identity Tier (Vercel + Supabase Tier)

- **The "Time Machine":** A PostgreSQL storage strategy using **SCD Type 2** tracking to preserve price history and property evolution.
- **Instant Access UX:** A frictionless search bar that detects GeoIDs for direct navigation, combined with a **QC Cockpit** for final human-in-the-loop validation.
- **Social-First Interaction:** Integrated Zalo deep-linking and smart gating (login walls/rate limiting) to protect data integrity while facilitating effortless user-to-owner connections.

## Project Classification

**Technical Type:** Hybrid Multi-Cloud SPA (React 19 + FastAPI + GCP Refinery)
**Domain:** Real Estate (PropTech) / Data Engineering
**Complexity:** **High** (Event-driven pipeline, Geo-Identity Logic, SCD Type 2 History)
**Project Context:** Brownfield - Consolidating legacy data logic into a GCP Refinery while implementing the GeoID vision on Supabase/Vercel.

## Success Criteria

### User Success

- **Single-Entry Simplicity:** Users rely on a single smart search bar for all needs, experiencing an intuitive flow that helps them build queries or jump to listings without learning complex modes.
- **Guided Construction:** Users find matching properties faster because the search bar actively suggests "UI tokens" (chips) to build logical queries as they type.
- **Instant Result:** Direct GeoID entry results in a <300ms "teleport" directly to the property page, feeling like a native app shortcut.
- **Vibe & Intent Recognition:** Users walk away feeling "understood" as the system correctly translates their specific intents (e.g., "cho nuôi mèo", "dưới 4 củ") into accurate results.

### Business Success

- **Development Velocity:** Achieving advanced natural language understanding through a lightweight LLM bridge (Gemini Flash) rather than building and maintaining custom Vietnamese NLP libraries.
- **Operational Mastery:** The Founder processes 50+ listings daily in under 30 minutes of review time, ensuring the public feed remains the "Cleanest Source of Truth."
- **Search Satisfaction:** High "Success-to-Search" ratio—users find a relevant listing within their first two queries on the platform.

### Technical Success

- **Waterfall Dispatcher Logic:** 100% reliable routing between GeoID regex jumps, UI token building, and LLM intent parsing within the search bar.
- **Filter Mapping Accuracy:** >90% accuracy in translating natural language sentences into structured PostgreSQL filter parameters via the LLM bridge.
- **Refinery Resilience:** The scraping pipeline maintains 100% freshness with zero account bans through its stateless, high-frequency approach.

### Measurable Outcomes

- **Direct Navigation Rate:** Target >20% of listing views initiated via GeoID "teleportation" in the search bar.
- **Intent Parse Latency:** Total time for NL translation + DB query execution maintained under 800ms.
- **SLA Freshness:** Scraped posts are processed and available for review in under 24 hours.

## Product Scope

### MVP - Minimum Viable Product

- **Smart Waterfall Search Bar:** Single input handling (1) GeoID Regex Jump, (2) Manual UI Filters, and (3) Basic Keyword Search.
- **Guided Query Mode:** A specific interface (enabled via checkbox) that helps users build filters visually using UI tokens/chips.
- **GCP Data Factory:** Deployed stateless scraper and Gemini refinery for core data (Price, Ward, District).
- **Identity Storage:** Supabase PostgreSQL with GeoID generation and SCD Type 2 history.
- **QC Cockpit:** Side-by-side review interface for human verification before publication.
- **Discovery UI:** Mobile-first listing grid and detail pages with Zalo deep-linking.

### Growth Features (Post-MVP)

- **LLM Intent Parser:** Integrating the Gemini Flash bridge to turn full natural language sentences into logical queries.
- **Guided UI Tokens:** Interactive chips in the search bar to help users build searches visually.
- **Smart Gating:** Login walls for contact info and rate-limiting protection.
- **Owner Claiming:** Workflow for landlords to verify their own GeoID portfolios.

### Vision (Future)

- **Vector Search:** Implementing semantic embeddings to capture property "vibes" and nuanced conceptual queries.
- **O2O Identity:** Physical QR stickers on properties for instant digital identity lookup.
- **AI Tenant Agent:** Autonomous search assistant that "hunts" for matching rooms based on historical user vibes.

## User Journeys

**Journey 1: Hương — The "Frictionless" Seeker**
Hương is looking for a room near Bách Khoa. She hates searching; she just wants to find a real room and talk to someone who won't scam her. She sees a Threads post about a great room with a short link: `nhaminhbach.com/ND1`. 

She clicks and the page loads instantly. She sees structured data, a price history that hasn't spiked, and a "Point of Failure" note: *"No elevator, 4th floor."* She loves the honesty. She hits the **"Contact via Zalo"** button. Instead of a sketchy broker, she is deep-linked into a chat with **Minh**. She asks, "Is room `ND1` still available?" Minh confirms and coordinates the next steps. She feels she's dealing with a professional platform, not a chaotic group.

**Journey 2: Minh — The Automated Verifier**
Minh manages the quality. He trusts the system's logic but verifies the "truth" of the social post. He opens the **QC Cockpit**. The GCP pipeline has already scraped a post, hashed the address, and **automatically assigned** it to `29CG.W8K01`.

Minh doesn't touch the ID. He reviews the side-by-side: The raw Facebook text vs. the AI-rewritten description (which prevents search-back). He checks the geocoding and the "Fingerprint" check—the system warns him this address appeared 3 months ago at a different price. Minh hits **"Verify"**. The listing is now live. When Hương pings his Zalo, he knows exactly which room she’s talking about because the GeoID is in the message.

**Journey 3: Cô Hiền — The "Vanity" Landlord**
Cô Hiền wants to look professional and save time answering the same questions. Minh shows Cô Hiền her automatically generated room page and says, *"Cô can send this link to anyone on Zalo."* 

Minh sets up her **Vanity Alias**: `nhaminhbach.com/co-hien-bach-khoa`. Cô Hiền posts this link in her Zalo status. When a potential tenant clicks, they see her full portfolio of 5 rooms, all with their unique GeoIDs. She no longer has to send 20 photos per chat. She tells people, *"Check my Nhaminhbach link for current availability."* She pays a small fee for the custom link, which Minh uses to keep the "Search Bar" free for students.

**Journey 4: The Shadow Broker — The "Honeypot" Ban**
A competitor broker trying to steal Minh's cleaned data tries to copy a room's description to find the original post on Facebook. Because of **AI Obfuscation**, the text matches nothing.

Frustrated, he tries to "Bulk View" contact info for all Cầu Giấy rooms. He accidentally clicks a hidden **Honeypot Link** (invisible to humans). The system identifies him as a bot and triggers an **Auto-Ban**. His IP is blacklisted, and he can no longer access the "Clean Data."

### Journey Requirements Summary

- **Geo-Identity System:** 100% automated ID generation (HHHRR), address/phone fingerprinting, Root-level Aliases (`/alias`).
- **Interaction Layer:** Zalo Deep-linking to Minh (Admin), "Login Wall" for data protection, Rate Limiting.
- **GCP Data Refinery:** Stateless scraping, AI Description Rewriting, Geocoding Fallback.
- **QC Cockpit:** Side-by-side verification (Minh as Verifier), Fingerprint collision alerts.
- **UX:** "Google-style" Search (Instant Teleport), Vlog-style "Point of Failure" fields.

## Innovation & Novel Patterns

### Detected Innovation Areas

- **Geo-Identity System (`29CG.HHHRR`):** A semantic, human-friendly identity architecture that transforms database identifiers into a "teleportation" tool for instant property navigation.
- **Hybrid Data Refinery:** A stateless, event-driven GCP pipeline that systematically "refines" social media chaos into high-trust production data before it reaches the primary storage layer.
- **Waterfall Smart Search UX:** UX innovation that simplifies a 4-tier dispatcher (ID Regex, Guided Builder, LLM Intent, and Vector Search) into a single, intuitive search bar.
- **Social-First Trust Gating:** Strategic use of Zalo deep-linking and "Login Walls" designed to optimize user experience while creating a defensive barrier against competitor scraping.

### Market Context & Competitive Landscape

In a market dominated by "Information Chaos" (Facebook Groups) and "Legacy Listing Sites" (Batdongsan, Chotot), NhaMinhBach innovates by positioning itself as a "Filter Layer" rather than a "Listing Site." By leveraging social network traffic but providing a superior digital identity layer, the platform addresses the "Lemon Market" problem where low-quality data traditionally drives out high-quality leads.

### Validation Approach

- **ID Adoption Rate:** Measuring the percentage of users who bypass traditional search by entering GeoIDs directly.
- **Intent Parse Accuracy:** Continuous validation of the Gemini Flash bridge in mapping natural language queries to structured filters.
- **Refinery Yield:** Tracking the success rate of automated social post structuring vs. manual intervention needs in the QC Cockpit.

### Risk Mitigation

- **Scraper Fragility:** Mitigated through a stateless, high-frequency, shallow-scrape strategy that minimizes the platform footprint.
- **Data Integrity:** Ensured by human-in-the-loop validation via the QC Cockpit and Pydantic-based data contracts for all AI-generated content.
- **Competitor Scraping:** Mitigated through Rate Limiting, Honeypot traps, and AI-driven description obfuscation.

## Web App & API Specific Requirements

### Project-Type Overview
NhaMinhBach is a high-performance Single Page Application (SPA) backed by a hybrid serverless API. It prioritizes "Instant Gratification" navigation and a minimalist, Google-style interface. The backend is designed to be a "Refinery," where GCP-processed data is delivered to a Supabase "Clean Room."

### Technical Architecture Considerations
- **Architecture Pattern:** React 19 SPA (Vite) + FastAPI (Vercel) + GCP Refinery.
- **Responsive Design:** Mobile-First is non-negotiable. Touch targets must be optimized for one-handed "Zalo-style" interaction.
- **Performance Targets:** First Contentful Paint (FCP) must be < 1.5s. Short ID lookups must resolve in < 300ms.
- **Browser Support:** Modern Standards only (ES2022+).
- **Communication:** Standard Polling/Refresh for availability updates.

### API & Authentication Model
- **Public Access:** Unauthenticated access for listing discovery and search. Protected by **Smart Gating** (Rate limiting and Honeypot traps).
- **Admin Access (Minh):** Supabase Auth (using Zalo or Email) for access to the QC Cockpit and manual verification overrides.
- **Service Handoff:** GCP Refinery to Supabase handoff secured via Service Role keys (Server-to-Server).

### Endpoint Specifications
- `GET /resolve/{geoid}`: Validates regex and directs to listing.
- `POST /api/v1/search/intent`: Bridge to Gemini Flash for NL-to-Filter translation.
- `GET /api/v1/listings`: Filterable feed with support for GeoID metadata.
- `POST /api/v1/ingest`: Secured endpoint for the GCP Refinery to deliver "Clean Oil."
- `PATCH /api/v1/qc/verify/{id}`: Minh’s one-click approval endpoint in the Cockpit.
- `GET /api/v1/houses/{id}/history`: Powers the "Time Machine" price chart.

## Project Scoping & Phased Development

### MVP Strategy & Philosophy

**MVP Approach:** Hybrid (Experience + Revenue + Platform).
- **Experience:** Replacing manual filters with a "Guided Query Builder" to provide a unique, high-trust search UX.
- **Revenue:** Empowering "Minh the Super Broker" with lead management tools to generate immediate cashflow via intermediate Zalo links.
- **Platform:** Automated Geo-Identity generation and Supabase storage as the "Source of Truth."

**Resource Requirements:** Lean team (Solo Founder + AI Agents). Requires deep expertise in React state management for the search builder and GCP data engineering.

### MVP Feature Set (Phase 1)

**Core User Journeys Supported:**
- **Hương (The Seeker):** Instant Teleport (GeoID) and **Guided Query Search** (Token-based builder).
- **Minh (The Verifier):** Automated scraping pipeline + **Side-by-Side QC Dashboard** (Verified functional in current codebase).
- **Cô Hiền (The Landlord):** Direct access to listings via system-generated GeoID links.

**Must-Have Capabilities:**
- **Smart Waterfall Search Bar:** Single input handling (1) GeoID Regex Jump, (2) Manual UI Filters, and (3) Basic Keyword Search.
- **Guided Query Mode:** A specific interface (enabled via checkbox) that helps users build filters visually using UI tokens/chips.
- **GCP Refinery:** High-frequency stateless scraper and Gemini refinery for core data (Price, Ward, District).
- **Supabase Storage:** SCD Type 2 price tracking and House/Room identity schema.
- **Side-by-Side Review:** High-throughput interface for human-in-the-loop verification (Minh).
- **Interaction Layer:** Zalo deep-linking to Admin (Minh) for lead verification and trust building.

### Post-MVP Features

**Phase 2 (Growth):**
- **LLM Intent Parser:** Full natural language sentence-to-filter translation.
- **Vanity Aliases:** Support for root-level custom URLs (e.g., `nhaminhbach.com/co-hien`).
- **Smart Gating:** Login walls for contact info and rate-limiting protection.
- **Owner Claiming:** Workflow for landlords to verify their own GeoID portfolios.

**Phase 3 (Expansion):**
- **Vector Search:** Semantic "vibe" search capabilities.
- **O2O QR Layer:** Physical identity stickers for property windows.
- **AI Tenant Agent:** Autonomous search assistant that "hunts" for matching rooms based on historical user vibes.

### Risk Mitigation Strategy

**Technical Risks:** The complexity of the "Guided Query Builder" UX and the multi-cloud data bridge. *Mitigation:* Use a "Logic First" approach to ensure query parameters map correctly to Supabase before applying aesthetic polish.
**Market Risks:** User friction if the "Guided" mode is non-intuitive. *Mitigation:* Keep standard keyword search as a constant fallback and use the checkbox to "unlock" the guided experience.
**Resource Risks:** Over-engineering the GCP refinery. *Mitigation:* Focus on "Core Data" extraction (Price/Location) and leave complex attribute extraction for Phase 2.

## Functional Requirements

### Property Discovery & Search
- **FR1:** Seekers can navigate directly to a specific property using a unique GeoID.
- **FR2:** Seekers can build logical queries using a guided token-based interface (chips).
- **FR3:** Seekers can perform standard keyword searches across property descriptions.
- **FR4:** Seekers can filter property results by Price Range, Ward, and District.
- **FR5:** Seekers can view a map representation of property locations (pin or circle based on accuracy).
- **FR6:** Seekers can toggle between a "Guided Query" mode and standard keyword search.
- **FR7:** Seekers can view a historical price timeline for a specific room (The "Time Machine").
- **FR8:** Seekers can view "Góc nhìn thật" (Real view) and "Điểm trừ" (Cons) metadata for any listing.

### Interaction & Communication
- **FR9:** Seekers can initiate a direct Zalo chat with the Platform Admin (Minh) regarding a specific property.
- **FR10:** Landlords can share their specific property or portfolio via a human-readable alias URL.
- **FR11:** Users can view property contact information only after passing a "Login Wall" or verification gate.
- **FR12:** Users can trigger a pre-filled Zalo message template containing the property's GeoID.

### Data Factory & Refinery (GCP)
- **FR13:** The System can autonomously ingest raw rental posts from social media sources.
- **FR14:** The System can transform unstructured Vietnamese text into structured property data.
- **FR15:** The System can identify unique physical properties across multiple social posts using address/phone fingerprinting.
- **FR16:** The System can automatically generate unique, hierarchical GeoIDs for new properties.
- **FR17:** The System can geocode structured addresses into geographic coordinates using a fallback sequence.
- **FR18:** The System can rewrite social media descriptions into unique platform content using AI.

### Quality Control & Administration (Minh)
- **FR19:** Admins can review ingested data in a side-by-side comparison interface (Raw vs. Refined).
- **FR20:** Admins can manually override and edit any attribute of a listing before approval.
- **FR21:** Admins can approve or reject pending listings with a single action.
- **FR22:** Admins can view fingerprint collision alerts for properties that have appeared historically.
- **FR23:** Admins can manage the "Available/Rented" status of any room in the system.

### Security & Integrity
- **FR24:** The System can identify and auto-ban non-human scraping agents via invisible "Honeypot" links.
- **FR25:** The System can rate-limit the viewing of sensitive contact information per user.
- **FR26:** The System can enforce a "Login Wall" for accessing owner/admin contact details.

## Non-Functional Requirements

### Performance
- **Short ID Resolution:** Entering a GeoID in the search bar must resolve to the property page in **< 300ms** (network excluding).
- **Search Intent Latency:** Transforming natural language to a logical query and returning results must complete in **< 800ms**.
- **First Contentful Paint (FCP):** The public landing page must load in **< 1.5s** on a standard 4G connection in Hanoi.
- **Mobile Smoothness:** Touch interactions (scrolling, chip selection) must maintain **60fps** to ensure a "Zalo-like" responsive feel.

### Security
- **Data Protection (Smart Gating):** Owner contact information must be protected behind a rate-limiting gate (e.g., maximum **5 contact views per day** per user).
- **Competitor Defense:** Implement **Honeypot link detection** that automatically blacklists IPs demonstrating bulk-scraping behavior within **< 10 seconds** of detection.
- **Data Integrity:** All LLM-generated data must pass **Pydantic schema validation** before being committed to Supabase to prevent data corruption.
- **Admin Security:** Minh's access to the QC Cockpit must be secured via **Multi-Factor Authentication (MFA)** or Zalo Social Login.

### Scalability
- **Horizontal Scraping:** The GCP pipeline must support scaling to **50+ concurrent Cloud Run instances** to handle regional expansion without architectural changes.
- **Storage Strategy:** Supabase storage must handle up to **100,000 active listings** with price history without query performance degradation (using proper indexing on full_geo_id and address_hash).
- **Refinery Throughput:** The transformation engine must be capable of processing **1,000+ social media posts daily** without human intervention bottlenecking the pipeline.

### Reliability
- **SLA Freshness:** Data ingested from social media must be processed and ready for verification in **< 24 hours**.
- **Transactional Consistency:** 100% of listing creations must be **Atomic** (House + Room + History) to prevent partial data states.
